<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polymarket Activity</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="main-container">
        <!-- Top Control Bar -->
        <div class="controls-bar">
            <!-- Search is now global or per tab? Screenshot shows search under tabs usually, but user screenshot shows search bar. 
                 The screenshot provided for "Positions" has tabs AT THE TOP, then search bar. 
                 My current layout has search bar at top. I will keep search bar at top for now or move it? 
                 The screenshot shows: Tabs (Positions, Open orders, History) -> Search Bar -> Filter Bar (for history?) -> Table.
                 Wait, the screenshot for Positions shows: Tabs -> Search Bar -> Table.
                 The screenshot for Activity (History) shows: Search Bar -> Filters -> Table.
                 
                 Let's place Tabs ABOVE the Search Bar.
            -->
        </div>
        
        <div class="tabs-nav">
            <button class="nav-tab active" data-tab="positions">Positions</button>
            <button class="nav-tab" data-tab="openOrders">Open orders</button>
            <button class="nav-tab" data-tab="history">History</button>
        </div>

        <div class="controls-bar">
            <div class="search-wrapper">
                <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <input 
                    type="text" 
                    id="walletAddress" 
                    placeholder="Search"
                    spellcheck="false"
                >
            </div>
            
            <!-- Filters for History (Hidden in Positions view) -->
            <div class="actions-group" id="historyFilters" style="display: none;">
                <button class="btn-filter">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="21" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="3" y2="18"></line></svg>
                    All
                </button>
                <button class="btn-filter">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline></svg>
                    Newest
                </button>
                <button class="btn-filter date-range">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                    Date Range
                </button>
                <button class="btn-filter">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                    Export
                </button>
                <button class="btn-filter">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line></svg>
                    Close Losses
                </button>
            </div>
            
            <!-- Filters for Positions (Current value button) -->
            <div class="actions-group" id="positionsFilters">
                <button class="btn-filter">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18M3 12h18M3 18h18"></path></svg>
                    Current value
                </button>
            </div>
        </div>

        <!-- Content Area -->
        <div id="loading" class="loading-state" style="display: none;">
            <div class="spinner"></div>
        </div>

        <div id="error" class="error-state" style="display: none;"></div>

        <!-- POSITIONS VIEW -->
        <div id="positionsView">
            <div class="table-header positions-header">
                <div class="col-pos-market">MARKET</div>
                <div class="col-pos-prices">AVG <span class="arrow">→</span> NOW <span class="info-icon">ⓘ</span></div>
                <div class="col-pos-bet">BET</div>
                <div class="col-pos-towin">TO WIN</div>
                <div class="col-pos-value">VALUE <span class="arrow">∨</span></div>
            </div>
            <div id="positionsContainer" class="trades-list">
                <div class="empty-state">
                    Enter wallet address to view positions
                </div>
            </div>
        </div>

        <!-- HISTORY VIEW (Hidden initially) -->
        <div id="historyView" style="display: none;">
            <div class="table-header history-header">
                <div class="col-activity">ACTIVITY</div>
                <div class="col-market">MARKET</div>
                <div class="col-value">VALUE</div>
            </div>

            <div id="tradesContainer" class="trades-list">
                <div class="empty-state">
                    Enter wallet address to view history
                </div>
            </div>

            <div id="loadMore" class="load-more-container" style="display: none;">
                <button class="btn-load-more" onclick="loadMoreTrades()">Load More</button>
            </div>
        </div>

    </div>

    <!-- Date Picker Modal -->
    <div id="datePickerModal" class="date-picker-modal" style="display: none;">
        <div class="dp-container">
            <!-- Sidebar -->
            <div class="dp-sidebar">
                <div class="dp-sidebar-item" data-range="today">Today</div>
                <div class="dp-sidebar-item" data-range="yesterday">Yesterday</div>
                <div class="dp-sidebar-item" data-range="lastWeek">Last Week</div>
                <div class="dp-sidebar-item" data-range="lastMonth">Last Month</div>
                <div class="dp-sidebar-item" data-range="last3Months">Last 3 Months</div>
                <div class="dp-sidebar-item" data-range="ytd">Year to Date</div>
                <div class="dp-sidebar-item" data-range="lastYear">Last Year</div>
                <div class="dp-sidebar-item" data-range="all">All</div>
            </div>

            <!-- Calendar Area -->
            <div class="dp-main">
                <div class="dp-header">
                    <button class="dp-nav-btn" id="prevMonth">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"></polyline></svg>
                    </button>
                    <button class="dp-nav-btn" id="prevYear">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="11 17 6 12 11 7"></polyline><polyline points="18 17 13 12 18 7"></polyline></svg>
                    </button>
                    
                    <span class="dp-current-month" id="currentMonthLabel">December 2025</span>
                    
                    <button class="dp-nav-btn" id="nextMonth">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg>
                    </button>
                    <button class="dp-nav-btn" id="nextYear">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline></svg>
                    </button>
                </div>

                <div class="dp-weekdays">
                    <div>Su</div><div>Mo</div><div>Tu</div><div>We</div><div>Th</div><div>Fr</div><div>Sa</div>
                </div>
                
                <div class="dp-days" id="calendarDays">
                    <!-- Days will be injected via JS -->
                </div>
            </div>
        </div>
        
        <div class="dp-footer">
            <button class="dp-btn-clear" id="clearDateRange">Clear Date Range</button>
            <div class="dp-footer-actions">
                <button class="dp-btn-cancel" id="cancelDatePicker">Cancel</button>
                <button class="dp-btn-set" id="setDates">Set Dates</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
